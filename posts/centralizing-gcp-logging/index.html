<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Setting up Logging and Billing for GCP Projects using Terraform" /><meta name="author" content="Kyhle Öhlinger" /><meta property="og:locale" content="en" /><meta name="description" content="Hi all, My name is Kyhle Öhlinger and this blog post forms part of my personal blog. If you enjoy any of the posts, feel free to reach out and let me know :)" /><meta property="og:description" content="Hi all, My name is Kyhle Öhlinger and this blog post forms part of my personal blog. If you enjoy any of the posts, feel free to reach out and let me know :)" /><link rel="canonical" href="https://ohlinger.co/posts/centralizing-gcp-logging/" /><meta property="og:url" content="https://ohlinger.co/posts/centralizing-gcp-logging/" /><meta property="og:site_name" content="Kyhle Öhlinger" /><meta property="og:image" content="https://ohlinger.co/assets/img/GCP/gcp.png" /><meta property="og:image:height" content="500" /><meta property="og:image:width" content="800" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2025-04-01T06:00:00-04:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://ohlinger.co/assets/img/GCP/gcp.png" /><meta property="twitter:title" content="Setting up Logging and Billing for GCP Projects using Terraform" /><meta name="twitter:site" content="@KyhleO" /><meta name="twitter:creator" content="@KyhleO" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Kyhle Öhlinger","url":"https://github.com/KyhleOhlinger/"},"dateModified":"2025-04-02T11:27:42-04:00","datePublished":"2025-04-01T06:00:00-04:00","description":"Hi all, My name is Kyhle Öhlinger and this blog post forms part of my personal blog. If you enjoy any of the posts, feel free to reach out and let me know :)","headline":"Setting up Logging and Billing for GCP Projects using Terraform","image":{"width":800,"height":500,"url":"https://ohlinger.co/assets/img/GCP/gcp.png","@type":"imageObject"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://ohlinger.co/posts/centralizing-gcp-logging/"},"url":"https://ohlinger.co/posts/centralizing-gcp-logging/"}</script><title>Setting up Logging and Billing for GCP Projects using Terraform | Kyhle Öhlinger</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Kyhle Öhlinger"><meta name="application-name" content="Kyhle Öhlinger"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/img/Kyhle_Icon.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Kyhle Öhlinger</a></div><div class="site-subtitle font-italic">Lead Security Engineer</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/KyhleOhlinger" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/KyhleO" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['kyhle','ohlinger.co'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="https://www.linkedin.com/in/kyhleohlinger" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Setting up Logging and Billing for GCP Projects using Terraform</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>Setting up Logging and Billing for GCP Projects using Terraform</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1743501600" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Apr 1, 2025 </em> </span><div class="mt-3 mb-3"> <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 800 500'%3E%3C/svg%3E" data-src="/assets/img/GCP/gcp.png" class="preview-img bg" alt="Preview Image" width="800" height="500" data-proofer-ignore></div><div class="d-flex justify-content-between"> <span> By <em> <a href="https://github.com/KyhleOhlinger/">Kyhle Öhlinger</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2819 words"> <em>15 min</em> read</span></div></div></div><div class="post-content"><blockquote class="prompt-info"><div><p>This is the link to the <a href="https://github.com/KyhleOhlinger/gcp-logging-project-public">GitHub repository</a> that you can use to set up logging within your environments!</p></div></blockquote><p>I have been working on a creating an open source GCP threat hunting lab (to be released later this year..) and during that time the importance having the ability to; automate the creation of several projects, capture logging in a central repository, and create billing alerts automatically, became clear. There are a number of great blog posts on the importance of setting up logging in GCP projects as well as posts on architecting logging projects (which I have used as reference), but I haven’t come across any that guide you through both. If you would like to read more about these topics, I have included the links in the <a href="#useful-resources">Useful Resources</a> section below.</p><h1 id="overview">Overview</h1><p>This blog post provides a breakdown of the following components which you can use in your own logging project(s):</p><ol><li>Capturing the required logs for the newly created GCP project<li>Creating log sinks to export logs to Cloud Storage and BigQuery<li>Creating log sinks to export the logs to a centralized logging project (in my case, the administration account)<li>Creating billing alerts for your new project</ol><p>A very basic high-level overview of this setup is provided below: <img data-src="/assets/img/GCP/Logging_Project/overview.png" alt="img-description" data-proofer-ignore> <em>High-level overview of the GCP project setup</em></p><p>The main modules that are used within the Terraform project (and that we’re going to talk about during this post) are <strong>billing</strong> and <strong>logging</strong>. The logging module includes Terraform code to create Storage Bucket and BigQuery log sinks for both the individual GCP project as well as for the centralized logging project, while the billing module handles budgets and alerting channels for your specified budget thresholds. An example of the directory structure for this project is provided below:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre>├───.github
│   └───workflows
└───terraform
    └───gcp-core
        └───modules
            ├───billing
            └───logging
</pre></table></code></div></div><p>The idea behind this type of a project structure / setup is that you can use the same structure for all of your GCP projects and simply add in additional modules as required. The benefit being that the project structure as well as the logging and billing requirements are already handled when you inevitably create new GCP projects within your personal or organizational GCP accounts.</p><h1 id="prerequisites">Prerequisites</h1><p>The remainder of this post assumes that you have already configured the following:</p><ol><li>GitHub account with a new GitHub repository<li>Administrative access to a GCP account or a GCP Service Account with the relevant permissions<li>Service account credentials stored in GitHub <code class="language-plaintext highlighter-rouge">Secrets</code> for the new GitHub repository<li>Storage bucket within the Administrative / Centralized project for the new <code class="language-plaintext highlighter-rouge">tfstate</code> file</ol><blockquote class="prompt-info"><div><p><strong>Project</strong>, <strong>Organization</strong>, and <strong>Billing</strong> are 3 separate components for permissions. Giving “Organization” level permissions is not enough, the permissions should be given from “Billing Account” as well. Modifying these additional permissions can be done using the <strong>Resource Manager</strong> view.</p></div></blockquote><p>During testing, I used an “Administration” project with a Service Account (SA) to deploy the Terraform modules using GitHub Actions. This “administration” account is also the centralized logging project that the logs from all additional GCP projects will be sent to. Additionally, if you are making use of an Administration project, the following APIs have to be enabled within the project:</p><ul><li><code class="language-plaintext highlighter-rouge">cloudresourcemanager.googleapis.com</code><li><code class="language-plaintext highlighter-rouge">logging.googleapis.com</code><li><code class="language-plaintext highlighter-rouge">cloudbilling.googleapis.com</code><li><code class="language-plaintext highlighter-rouge">billingbudgets.googleapis.com</code></ul><h2 id="using-github-actions"><span class="mr-2">Using GitHub Actions</span><a href="#using-github-actions" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>If you are going to be using this project (as intended), it includes a CICD component through the use of GitHub actions. The GitHub actions workflow should work “out-of-the-box”, but there are some pieces that you would need to configure before deploying this to a personal project.</p><h3 id="example-of-credentials-stored-within-a-new-github-project"><span class="mr-2">Example of Credentials Stored within a new GitHub Project:</span><a href="#example-of-credentials-stored-within-a-new-github-project" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Once you have your GitHub project set up, you should add your Service Account credentials as a <code class="language-plaintext highlighter-rouge">GOOGLE_CREDENTIALS</code> variable to the repository secrets: <img data-src="/assets/img/GCP/Logging_Project/20241213155606.png" alt="img-description" data-proofer-ignore> <em>Storing Credentials in GitHub Secrets</em></p><h3 id="example-of-tfstate-storage-bucket-in-the-administration-project"><span class="mr-2">Example of <code class="language-plaintext highlighter-rouge"><span class="mr-2">tfstate</code> Storage Bucket in the Administration Project</span><a href="#example-of-tfstate-storage-bucket-in-the-administration-project" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>For the GitHub actions portion of this project to work effectively with Terraform, it requires a <code class="language-plaintext highlighter-rouge">tfstate</code> state file. The method that I have used within my projects is to have an “Adminstration” project which contains all of the state files - this project also functions as the central logging repository for all additional GCP projects. To store the <code class="language-plaintext highlighter-rouge">tfstate</code> file, an empty bucket should be created within the relevant GCP project named <code class="language-plaintext highlighter-rouge">gcp-logging-project-tfstate</code>. This bucket will be used during the configuration stage when setting this up in your own environment. <img data-src="/assets/img/GCP/Logging_Project/20241213155505.png" alt="img-description" data-proofer-ignore> <em>tfstate Storage Bucket in the Administrative Project</em></p><p>If you choose to name your bucket something else, you will need to modify <code class="language-plaintext highlighter-rouge">bucket</code> variable within the main <code class="language-plaintext highlighter-rouge">provider.tf</code> file:</p><div class="language-hcl highlighter-rouge"><div class="code-header"> <span data-label-text="Hcl"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="nx">terraform</span> <span class="p">{</span>
  <span class="nx">backend</span> <span class="s2">"gcs"</span> <span class="p">{</span>
    <span class="nx">bucket</span> <span class="p">=</span> <span class="s2">"gcp-logging-project-tfstate"</span>
    <span class="nx">prefix</span> <span class="p">=</span> <span class="s2">"terraform/state"</span>
  <span class="p">}</span>
<span class="p">}</span> 
</pre></table></code></div></div><h1 id="enabling-cloud-audit-logs-at-different-levels">Enabling Cloud Audit Logs at Different Levels</h1><blockquote class="prompt-info"><div><p>In this project, we are enabling logging at the <strong>Project</strong> level. This section of the blog post dives into the different levels at which you can enable logging and things to consider when setting it up in your own environment.</p></div></blockquote><p>Before we dive into the project code, it is important to mention the different levels at which logging can be enabled within GCP. When you are enabling Cloud audit logs, you may have a number of items to consider including cost and storage requirements. I have provided a “Considerations” table below which will hopefully help you narrow down your scope when deciding on log ingestion filters:</p><div class="table-wrapper"><table><thead><tr><th><strong>Factor</strong><th><strong>Organization-Wide</strong><th><strong>Folder-Specific</strong><th><strong>Project-Specific</strong><tbody><tr><td><strong>Scope</strong><td>All resources in the organization<td>Resources in a specific folder<td>Resources in a single project<tr><td><strong>Governance</strong><td>Centralized<td>Delegated to department/teams<td>Decentralized, per project<tr><td><strong>Use Case</strong><td>Broad compliance and security policies<td>Department/team-specific policies<td>Customized project requirements<tr><td><strong>Complexity</strong><td>Simple to manage<td>Medium<td>High (scales poorly with many projects)<tr><td><strong>Storage Costs</strong><td>Can generate large amounts of logs<td>Moderate<td>Lowest</table></div><p>If you are unsure of how to proceed, I recommend the following:</p><ol><li><strong>Start with organization-wide logging</strong> for critical logs like <strong>Admin Activity</strong> and <strong>Policy Denied</strong> to ensure you have global visibility and compliance.<li>Use <strong>folder-specific logging</strong> to customize for departmental or regional needs without affecting the entire organization.<li>Apply <strong>project-specific logging</strong> sparingly, for <strong>exceptions or critical use cases</strong>.<li>Regularly review logging configurations to optimize <strong>storage costs</strong> and ensure <strong>appropriate coverage</strong>.</ol><p>In GCP, the choice between <strong>organization-wide logging</strong>, <strong>project-specific logging</strong>, or <strong>folder-specific logging</strong> depends on the scope of resources you want to monitor and manage. I have provided a basic summary of each choice in the sections below.</p><blockquote class="prompt-info"><div><p>If you configure multiple policies, ensure you:</p><ol><li>Keep track of exemptions and policies at different levels to avoid gaps.<li>Use the <code class="language-plaintext highlighter-rouge">exempted_members</code> attribute to define the override behavior.</ol></div></blockquote><h2 id="organization-wide-logging-google_organization_iam_audit_config"><span class="mr-2">Organization-Wide Logging (<code class="language-plaintext highlighter-rouge"><span class="mr-2">google_organization_iam_audit_config</code>)</span><a href="#organization-wide-logging-google_organization_iam_audit_config" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Use organization-wide logging when you want to enforce <strong>audit logging policies across all resources</strong> within your GCP organization. This is useful when:</p><ul><li>You need consistent logging for compliance or regulatory (e.g. SOX, PCI-DSS, or other regulatory frameworks) requirements across all folders, projects and resources.<li>You want to ensure that <strong>no project or folder can override</strong> the audit logging policy (e.g. Enabling <strong>Admin Activity</strong> logs for all IAM operations across the organization ensures you track all permission changes)<li>Your organization has centralized governance and requires a <strong>single source of truth</strong> for monitoring and audits.</ul><h2 id="folder-specific-logging-google_folder_iam_audit_config"><span class="mr-2">Folder-Specific Logging (<code class="language-plaintext highlighter-rouge"><span class="mr-2">google_folder_iam_audit_config</code>)</span><a href="#folder-specific-logging-google_folder_iam_audit_config" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Use folder-specific logging when you want to enforce audit logging policies for <strong>a subset of projects or resources</strong> that share the same parent folder. This is ideal when:</p><ul><li>You have a <strong>logical grouping of projects</strong> under a folder, such as for departments, environments (e.g., dev/test/prod), or teams.<li>The group of projects needs a <strong>specific logging configuration</strong> different from the rest of the organization (e.g. You may enable <strong>Data Access logs</strong> for a “Finance” folder containing projects that process sensitive financial data.)<li>You need to comply with departmental policies or specific internal standards. This helps when <strong>different</strong> teams/departments have varied compliance needs.</ul><h2 id="project-specific-logging-google_project_iam_audit_config"><span class="mr-2">Project-Specific Logging (<code class="language-plaintext highlighter-rouge"><span class="mr-2">google_project_iam_audit_config</code>)</span><a href="#project-specific-logging-google_project_iam_audit_config" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Use project-specific logging when you want to control audit logging <strong>at the granularity of individual projects</strong>. This is suitable for:</p><ul><li>Tailoring logging policies to the <strong>specific use case of a project</strong> (e.g. Disable certain audit logs for test or experimental projects to <strong>reduce log storage costs</strong>.)<li>Isolating logging for <strong>high-risk or high-visibility projects</strong> to meet specific security or compliance needs (e.g. Enable <strong>Admin Activity logs</strong> on a critical production project to monitor IAM role changes closely.)<li><strong>Overriding folder or organization-level settings</strong> for <strong>customized logging</strong> in certain projects.</ul><h1 id="breaking-down-the-terraform-project">Breaking Down the Terraform Project</h1><p>While this post is not going to go into detail about every line of code within the project, I have broken down some of the main concepts below.</p><h2 id="creating-a-gcp-project"><span class="mr-2">Creating a GCP Project</span><a href="#creating-a-gcp-project" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><blockquote class="prompt-info"><div><p>This only works for GCP accounts with an Organization component. If you are using a personal account, you will need to manually create a project and remove this block!</p></div></blockquote><p>This project assumes that you are going to be setting this up without having an existing GCP project. If you have an existing GCP project or if you are using a personal GCP account, you will need to remove the project creation block. Once removed, add in the <code class="language-plaintext highlighter-rouge">project_id</code> to the variables file and replace all instances of <code class="language-plaintext highlighter-rouge">google_project.terraform_project.project_id</code> with <code class="language-plaintext highlighter-rouge">var.project_id</code>. You will also need to remove <code class="language-plaintext highlighter-rouge">depends_on</code> instances for <code class="language-plaintext highlighter-rouge">google_project.terraform_project</code>.</p><div class="language-hcl highlighter-rouge"><div class="code-header"> <span data-label-text="Hcl"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="nx">resource</span> <span class="s2">"random_id"</span> <span class="s2">"project_id"</span> <span class="p">{</span>  
  <span class="nx">byte_length</span> <span class="p">=</span> <span class="mi">4</span>  
<span class="p">}</span>

<span class="nx">resource</span> <span class="s2">"google_project"</span> <span class="s2">"terraform_project"</span> <span class="p">{</span>  
  <span class="nx">name</span>            <span class="p">=</span> <span class="s2">"${var.prefix}"</span><span class="err">-</span><span class="nx">centralized</span><span class="err">-</span><span class="nx">logging</span><span class="s2">"  
  project_id      = "</span><span class="nx">$</span><span class="p">{</span><span class="nx">var</span><span class="err">.</span><span class="nx">prefix</span><span class="p">}</span><span class="err">-</span><span class="nx">logging</span><span class="err">-</span><span class="nx">$</span><span class="p">{</span><span class="nx">random_id</span><span class="err">.</span><span class="nx">project_id</span><span class="err">.</span><span class="nx">hex</span><span class="p">}</span><span class="s2">"  
  org_id          = var.organization_id  
  billing_account = var.billing_account  
}  

</span></pre></table></code></div></div><p>Once the GCP project has been created, the Terraform project has two main modules that it will run: <strong>logging</strong> and <strong>billing</strong>.</p><h2 id="setting-up-logging-within-the-new-gcp-project"><span class="mr-2">Setting up Logging within the new GCP Project</span><a href="#setting-up-logging-within-the-new-gcp-project" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>For this project, we are defining logging requirements at the project level. The audit log config will include all log types for all services. To enable logging for <strong>all services</strong> within a project, leave the <code class="language-plaintext highlighter-rouge">service</code> attribute empty or specify <code class="language-plaintext highlighter-rouge">allServices</code>. If you want to modify the services that are logged or if you want to add exceptions (users, service accounts, etc.), you are able to do so within the “Project’s Logging Configuration Definition” section of the Terraform file.</p><p>An example of logging only specific services with exclusions is provided in the code block below:</p><div class="language-hcl highlighter-rouge"><div class="code-header"> <span data-label-text="Hcl"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre><span class="nx">resource</span> <span class="s2">"google_project_iam_audit_config"</span> <span class="s2">"combined_logging"</span> <span class="p">{</span>
  <span class="nx">project</span> <span class="p">=</span> <span class="s2">"YOUR_PROJECT_ID"</span>

  <span class="c1"># Logging for all services</span>
  <span class="nx">audit_log_config</span> <span class="p">{</span>
    <span class="nx">log_type</span> <span class="p">=</span> <span class="s2">"ADMIN_READ"</span>
  <span class="p">}</span>

  <span class="c1"># Specific configuration for BigQuery</span>
  <span class="nx">audit_log_config</span> <span class="p">{</span>
    <span class="nx">service</span>  <span class="p">=</span> <span class="s2">"bigquery.googleapis.com"</span>
    <span class="nx">log_type</span> <span class="p">=</span> <span class="s2">"DATA_WRITE"</span>
    <span class="nx">exempted_members</span> <span class="p">=</span> <span class="p">[</span>
      <span class="s2">"user:bigquery-exempt@example.com"</span><span class="p">,</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><h1 id="creating-log-sinks">Creating Log Sinks</h1><p>Once logs have enabled for the required GCP services, you need to send them somewhere. Log sinks are a great way to not only store logs in specific resources (PubSub, Storage Bucket, BigQuery, etc.), but they can also be used to send the logs to other projects. The logging module contains a few different functions related to Cloud Storage and BigQuery, but the concept is identical - create a log configuration and use a log sink to send the data to the relevant resource.</p><p>The codeblock below shows how we can create a storage bucket sink for our new GCP project:</p><div class="language-hcl highlighter-rouge"><div class="code-header"> <span data-label-text="Hcl"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre><td class="rouge-code"><pre><span class="c1">#########################################################################</span>
<span class="c1">## Google Logging Bucket Definition </span>
<span class="c1">#########################################################################</span>
<span class="nx">resource</span> <span class="s2">"google_logging_project_bucket_config"</span> <span class="s2">"basic_logging"</span> <span class="p">{</span>
    <span class="nx">project</span>         <span class="p">=</span> <span class="nx">var</span><span class="err">.</span><span class="nx">project_id</span>
    <span class="nx">location</span>        <span class="p">=</span> <span class="s2">"global"</span>
    <span class="nx">retention_days</span>  <span class="p">=</span> <span class="mi">30</span>
    <span class="nx">bucket_id</span>       <span class="p">=</span> <span class="s2">"${var.resource_prefix}_logs"</span>
<span class="p">}</span>

<span class="c1"># filter - (Optional) The filter to apply when exporting logs. Only log entries that match the filter are exported. \</span>
<span class="c1"># e.g. filter                 = "logName:(cloudaudit.googleapis.com OR compute.googleapis.com)"</span>
<span class="nx">resource</span> <span class="s2">"google_logging_project_sink"</span> <span class="s2">"storage_sink"</span> <span class="p">{</span>
  <span class="nx">project</span>                <span class="p">=</span> <span class="nx">var</span><span class="err">.</span><span class="nx">project_id</span>
  <span class="nx">name</span>                   <span class="p">=</span> <span class="s2">"logs-storage-sink"</span>
  <span class="nx">destination</span>            <span class="p">=</span> <span class="s2">"logging.googleapis.com/projects/${var.project_id}/locations/global/buckets/${google_logging_project_bucket_config.basic_logging.bucket_id}"</span>
  <span class="nx">unique_writer_identity</span> <span class="p">=</span> <span class="kc">true</span>
  <span class="nx">filter</span>                 <span class="p">=</span> <span class="s2">"severity &gt;= ERROR"</span>
<span class="p">}</span>
</pre></table></code></div></div><p>Once this has been enabled, a Storage Bucket should be created in your new GCP project!</p><p><img data-src="/assets/img/GCP/Logging_Project/20241213160226.png" alt="img-description" data-proofer-ignore> <em>Cloud Logs Storage Bucket in the New GCP Project</em></p><p>As with the Storage Bucket, the codeblock below shows how we can create a BigQuery sink for our new GCP project:</p><div class="language-hcl highlighter-rouge"><div class="code-header"> <span data-label-text="Hcl"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
</pre><td class="rouge-code"><pre><span class="c1">#########################################################################</span>
<span class="c1">## Google BigQuery Definition </span>
<span class="c1">#########################################################################</span>

<span class="nx">resource</span> <span class="s2">"google_bigquery_dataset"</span> <span class="s2">"logs_dataset"</span> <span class="p">{</span>
  <span class="nx">dataset_id</span>  <span class="p">=</span> <span class="s2">"security_logs"</span>
  <span class="nx">description</span> <span class="p">=</span> <span class="s2">"Dataset for security logs"</span>
  <span class="nx">location</span>    <span class="p">=</span> <span class="nx">var</span><span class="err">.</span><span class="nx">region</span>
  <span class="nx">project</span>     <span class="p">=</span> <span class="nx">var</span><span class="err">.</span><span class="nx">project_id</span>
  <span class="nx">delete_contents_on_destroy</span> <span class="p">=</span> <span class="nx">var</span><span class="err">.</span><span class="nx">force_destroy</span>
<span class="p">}</span>

<span class="nx">resource</span> <span class="s2">"google_logging_project_sink"</span> <span class="s2">"bigquery_sink"</span> <span class="p">{</span>
  <span class="nx">name</span>        <span class="p">=</span> <span class="s2">"bigquery-sink"</span>
  <span class="nx">destination</span> <span class="p">=</span> <span class="s2">"bigquery.googleapis.com/projects/${var.project_id}/datasets/${google_bigquery_dataset.logs_dataset.dataset_id}"</span>
  <span class="nx">filter</span>      <span class="p">=</span> <span class="s2">"severity &gt;= ERROR"</span>

  <span class="nx">unique_writer_identity</span> <span class="p">=</span> <span class="kc">true</span>
  <span class="nx">project</span>                <span class="p">=</span> <span class="nx">var</span><span class="err">.</span><span class="nx">project_id</span>

  <span class="nx">bigquery_options</span> <span class="p">{</span>
    <span class="nx">use_partitioned_tables</span> <span class="p">=</span> <span class="kc">true</span> <span class="c1"># always true if it is false, logs cant export to the bigquery</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="nx">resource</span> <span class="s2">"google_bigquery_dataset_iam_binding"</span> <span class="s2">"bigquery_writer"</span> <span class="p">{</span>
  <span class="nx">project</span> <span class="p">=</span> <span class="nx">var</span><span class="err">.</span><span class="nx">project_id</span>
  <span class="nx">dataset_id</span> <span class="p">=</span> <span class="nx">google_bigquery_dataset</span><span class="err">.</span><span class="nx">logs_dataset</span><span class="err">.</span><span class="nx">dataset_id</span>
  <span class="nx">role</span>       <span class="p">=</span> <span class="s2">"roles/bigquery.dataEditor"</span>
  <span class="nx">members</span>    <span class="p">=</span> <span class="p">[</span>
    <span class="nx">google_logging_project_sink</span><span class="err">.</span><span class="nx">bigquery_sink</span><span class="err">.</span><span class="nx">writer_identity</span><span class="p">,</span>
  <span class="p">]</span>
  <span class="nx">depends_on</span> <span class="p">=</span> <span class="p">[</span><span class="nx">google_bigquery_dataset</span><span class="err">.</span><span class="nx">logs_dataset</span><span class="p">]</span>
<span class="p">}</span>
</pre></table></code></div></div><p>Once this has been enabled, a BigQuery table should be created in your project!</p><p><img data-src="/assets/img/GCP/Logging_Project/20241213161536.png" alt="img-description" data-proofer-ignore> <em>Security Logs sent to the new GCP Project’s BigQuery instance</em></p><h1 id="sending-logs-to-the-central-logging-project">Sending Logs to the Central Logging Project</h1><p>The code required to send the logs to a centralized source is almost identical to the per-project logging. The main difference being that you need to modify the <code class="language-plaintext highlighter-rouge">admin_project_id</code> variable to the <code class="language-plaintext highlighter-rouge">project_id</code> of the central logging project’s ID and everything should automatically connect. To confirm that it is working as expected, you can navigate to the Logging Router within the new GCP project and confirm that 4 manually created log sinks exist.</p><p><img data-src="/assets/img/GCP/Logging_Project/20250402112528.png" alt="img-description" data-proofer-ignore> <em>Newly Created Log Sinks within the new GCP Project</em></p><p>You should now be able to navigate to your newly created project, create resources, etc. and the activity will be logged and shared with the central administrative project.</p><h1 id="setting-up-project-billing">Setting up Project Billing</h1><p>Now that we have the require logs being sent to the required locations (Storage buckets, BigQuery tables, etc.), as well as the required logs being sent to a centralized logging project, the final step is to ensure that billing alerts are set for our new projects. If you’re looking for more information for each of the key/value pairs allowed within billing alerts, I recommend the following resources:</p><ul><li><a href="https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/billing_budget">https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/billing_budget</a><li><a href="https://cloud.google.com/billing/docs/how-to/budgets">https://cloud.google.com/billing/docs/how-to/budgets</a></ul><h2 id="billing-credits"><span class="mr-2">Billing Credits</span><a href="#billing-credits" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><blockquote class="prompt-info"><div><p>Selected credits are applied to the total cost. Budget tracks the total cost minus any applicable selected credits. If you want to be alerted on credits usage as well, you need to exclude the credits option!</p></div></blockquote><p><img data-src="/assets/img/GCP/Logging_Project/20250221161013.png" alt="img-description" data-proofer-ignore> <em>Optional Credits Available when Creating Billing Alerts</em></p><h2 id="creating-budgets-and-billing-alerts"><span class="mr-2">Creating Budgets and Billing Alerts</span><a href="#creating-budgets-and-billing-alerts" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Within the Terraform code, this project uses a <a href="https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/billing_budget#spend_basis-1"><code class="language-plaintext highlighter-rouge">spend_basis</code></a> within the <code class="language-plaintext highlighter-rouge">threshold_rules</code> to determine if spend has passed the threshold. If you prefer to have the budget set to actual spend instead of the forecasted spend, simply change the value to <code class="language-plaintext highlighter-rouge">CURRENT_SPEND</code>.</p><div class="language-hcl highlighter-rouge"><div class="code-header"> <span data-label-text="Hcl"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
</pre><td class="rouge-code"><pre><span class="nx">data</span> <span class="s2">"google_billing_account"</span> <span class="s2">"account"</span> <span class="p">{</span>
  <span class="nx">billing_account</span> <span class="p">=</span> <span class="p">{</span><span class="nx">var</span><span class="err">.</span><span class="nx">billing_account</span><span class="p">}</span>
<span class="p">}</span>

<span class="nx">resource</span> <span class="s2">"google_billing_budget"</span> <span class="s2">"budget"</span> <span class="p">{</span>
  <span class="nx">billing_account</span>   <span class="p">=</span> <span class="nx">data</span><span class="err">.</span><span class="nx">google_billing_account</span><span class="err">.</span><span class="nx">account</span><span class="err">.</span><span class="nx">id</span>
  <span class="nx">display_name</span>      <span class="p">=</span> <span class="s2">"{var.prefix} Billing Budget"</span>
  
  <span class="nx">budget_filter</span> <span class="p">{</span>
	  <span class="nx">projects</span>               <span class="p">=[</span><span class="s2">"projects/${var.project_id}"</span><span class="p">]</span>
	  <span class="nx">credit_types_treatment</span> <span class="p">=</span> <span class="s2">"INCLUDE_ALL_CREDITS"</span>
<span class="p">}</span>
  
  <span class="nx">amount</span> <span class="p">{</span>
    <span class="nx">specified_amount</span> <span class="p">{</span>
      <span class="nx">currency_code</span>  <span class="p">=</span> <span class="s2">"USD"</span>
      <span class="nx">units</span>          <span class="p">=</span> <span class="s2">"100.00"</span>
    <span class="p">}</span>
  <span class="p">}</span>

<span class="nx">threshold_rules</span> <span class="p">=[</span> 
	<span class="p">{</span>
		<span class="nx">threshold_percent</span> <span class="p">=</span>  <span class="mf">0.5</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="nx">threshold_percent</span> <span class="p">=</span> <span class="mf">1.0</span>
		<span class="nx">spend_basis</span>       <span class="p">=</span> <span class="s2">"FORECASTED_SPEND"</span>
	<span class="p">}</span>
<span class="p">]</span>
  
  <span class="nx">all_updates_rule</span> <span class="p">{</span>
    <span class="nx">monitoring_notification_channels</span>  <span class="p">=</span> <span class="p">[</span><span class="nx">google_monitoring_notification_channel</span><span class="err">.</span><span class="nx">notification_channel</span><span class="err">.</span><span class="nx">id</span><span class="p">,]</span>
    <span class="nx">disable_default_iam_recipients</span>    <span class="p">=</span> <span class="kc">true</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>Once you have decided on the budget amount, threshold percentages at which you want to be notified, and any credits that you want to include / exclude from these calculations, you will need to create a notification channel.</p><h2 id="creating-a-notification-channel"><span class="mr-2">Creating a Notification Channel</span><a href="#creating-a-notification-channel" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>The final part of creating budgets / billing alerts is notifying the account owner (group or specific individuals) when the thresholds are exceeded. The codeblock below shows the creation of an email based notification channel:</p><div class="language-hcl highlighter-rouge"><div class="code-header"> <span data-label-text="Hcl"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="nx">resource</span> <span class="s2">"google_monitoring_notification_channel"</span> <span class="s2">"notification_channel"</span> <span class="p">{</span>
  <span class="nx">display_name</span> <span class="p">=</span> <span class="s2">"${var.prefix} Notification Channel"</span>
  <span class="nx">type</span>         <span class="p">=</span> <span class="s2">"email"</span>

  <span class="nx">labels</span> <span class="p">=</span> <span class="p">{</span>
    <span class="nx">email_address</span> <span class="p">=</span> <span class="nx">var</span><span class="err">.</span><span class="nx">billing_email_address</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><h2 id="budget--billing-alert-limitations"><span class="mr-2">Budget / Billing Alert Limitations</span><a href="#budget--billing-alert-limitations" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Billing alerts and budgets do not prevent the usage of resources if the limit has been exceeded. The easiest way (<a href="https://cloud.google.com/billing/docs/how-to/notify#cap_disable_billing_to_stop_usage">as recommended by Google</a>) to automatically disable all services / resources within a project is to simply disable the billing account associated with the project. If this is something you want to set up, <a href="https://github.com/Cyclenerd/poweroff-google-cloud-cap-billing/tree/master">this GitHub project</a> has a great working version of the Cloud Run function that Google recommended.</p><p>Using this method, the project will no longer be visible under the Cloud Billing account and resources in the project are automatically disabled, including the Cloud Run function if it’s in the same project.</p><h1 id="closing-thoughts">Closing Thoughts</h1><p>I hope you found this post useful for automating the setup of GCP logging and billing alerts with Terraform. The GCP lab that I alluded to at the start of the post is going to include a blog series on the GitHub Actions used within this project, GCP, Terraform, and how to structure GitHub projects with a focus on DevSecOps (A number of concepts have already been implemented in this logging project which can be used as a reference). If you are interested in the GCP lab that I have been working on, please do reach out!</p><h1 id="useful-resources">Useful Resources</h1><ul><li><a href="https://medium.com/@AaronLJ/implementing-comprehensive-security-logging-in-gcp-with-terraform-76d4b4628346">https://medium.com/@AaronLJ/implementing-comprehensive-security-logging-in-gcp-with-terraform-76d4b4628346</a><li><a href="https://blog.marcolancini.it/2021/blog-security-logging-cloud-environments-gcp/">https://blog.marcolancini.it/2021/blog-security-logging-cloud-environments-gcp/</a><li><a href="https://medium.com/google-cloud/centralized-log-management-with-terraform-streamlining-log-export-to-supported-destinations-d8222818b1a0">https://medium.com/google-cloud/centralized-log-management-with-terraform-streamlining-log-export-to-supported-destinations-d8222818b1a0</a><li><a href="https://cloud.google.com/architecture/security-foundations/detective-controls">https://cloud.google.com/architecture/security-foundations/detective-controls</a><li><a href="https://github.com/terraform-google-modules/terraform-example-foundation/tree/master/1-org/modules">https://github.com/terraform-google-modules/terraform-example-foundation/tree/master/1-org/modules</a><li><a href="https://cloud.google.com/logging/docs/routing/overview">https://cloud.google.com/logging/docs/routing/overview</a></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/technical/'>Technical</a>, <a href='/categories/google-cloud-platform/'>Google Cloud Platform</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Setting+up+Logging+and+Billing+for+GCP+Projects+using+Terraform+-+Kyhle+%C3%96hlinger&url=https%3A%2F%2Fohlinger.co%2Fposts%2Fcentralizing-gcp-logging%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Setting+up+Logging+and+Billing+for+GCP+Projects+using+Terraform+-+Kyhle+%C3%96hlinger&u=https%3A%2F%2Fohlinger.co%2Fposts%2Fcentralizing-gcp-logging%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fohlinger.co%2Fposts%2Fcentralizing-gcp-logging%2F&text=Setting+up+Logging+and+Billing+for+GCP+Projects+using+Terraform+-+Kyhle+%C3%96hlinger" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/creating-a-chrome-extension/">Creating a Chrome Extension to Query Multiple LLMs</a><li><a href="/posts/centralizing-gcp-logging/">Setting up Logging and Billing for GCP Projects using Terraform</a><li><a href="/posts/testing-ai-setups/">High-Level Overview of my Current AI Toolset</a><li><a href="/posts/prompt-engineering-thoughts/">From Curiosity to Creativity&#58; My Thoughts on Prompt Engineering</a><li><a href="/posts/withsecure-myllmdoc-challenge/">WithSecure AI Challenge - My LLM Doctor</a></ul></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div class="post-navigation d-flex justify-content-between"> <a href="/posts/using-streamlit-for-llms/" class="btn btn-outline-primary" prompt="Older"><p>Creating a Basic Streamlit Application for Fabric Formatted Prompts</p></a> <a href="/posts/wiz-cloud-hunting-games/" class="btn btn-outline-primary" prompt="Newer"><p>Wiz's Cloud Hunting Games - The ExfilCola Incident</p></a></div></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://twitter.com/KyhleO">Kyhle Öhlinger</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
