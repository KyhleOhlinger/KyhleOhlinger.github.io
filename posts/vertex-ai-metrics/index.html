<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Querying Vertex AI Model Usage through GCP Observability Metrics" /><meta name="author" content="Kyhle Öhlinger" /><meta property="og:locale" content="en" /><meta name="description" content="Hi all, My name is Kyhle Öhlinger and this blog post forms part of my personal blog. If you enjoy any of the posts, feel free to reach out and let me know :)" /><meta property="og:description" content="Hi all, My name is Kyhle Öhlinger and this blog post forms part of my personal blog. If you enjoy any of the posts, feel free to reach out and let me know :)" /><link rel="canonical" href="https://ohlinger.co/posts/vertex-ai-metrics/" /><meta property="og:url" content="https://ohlinger.co/posts/vertex-ai-metrics/" /><meta property="og:site_name" content="Kyhle Öhlinger" /><meta property="og:image" content="https://ohlinger.co/assets/img/GCP/gcp.png" /><meta property="og:image:height" content="500" /><meta property="og:image:width" content="800" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2025-01-31T05:00:00-05:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://ohlinger.co/assets/img/GCP/gcp.png" /><meta property="twitter:title" content="Querying Vertex AI Model Usage through GCP Observability Metrics" /><meta name="twitter:site" content="@KyhleO" /><meta name="twitter:creator" content="@KyhleO" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Kyhle Öhlinger","url":"https://github.com/KyhleOhlinger/"},"dateModified":"2025-02-07T16:20:24-05:00","datePublished":"2025-01-31T05:00:00-05:00","description":"Hi all, My name is Kyhle Öhlinger and this blog post forms part of my personal blog. If you enjoy any of the posts, feel free to reach out and let me know :)","headline":"Querying Vertex AI Model Usage through GCP Observability Metrics","image":{"width":800,"height":500,"url":"https://ohlinger.co/assets/img/GCP/gcp.png","@type":"imageObject"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://ohlinger.co/posts/vertex-ai-metrics/"},"url":"https://ohlinger.co/posts/vertex-ai-metrics/"}</script><title>Querying Vertex AI Model Usage through GCP Observability Metrics | Kyhle Öhlinger</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Kyhle Öhlinger"><meta name="application-name" content="Kyhle Öhlinger"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/img/Kyhle_Icon.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Kyhle Öhlinger</a></div><div class="site-subtitle font-italic">Lead Security Engineer</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/KyhleOhlinger" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/KyhleO" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['kyhle','ohlinger.co'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="https://www.linkedin.com/in/kyhleohlinger" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Querying Vertex AI Model Usage through GCP Observability Metrics</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>Querying Vertex AI Model Usage through GCP Observability Metrics</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1738317600" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jan 31, 2025 </em> </span><div class="mt-3 mb-3"> <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 800 500'%3E%3C/svg%3E" data-src="/assets/img/GCP/gcp.png" class="preview-img bg" alt="Preview Image" width="800" height="500" data-proofer-ignore></div><div class="d-flex justify-content-between"> <span> By <em> <a href="https://github.com/KyhleOhlinger/">Kyhle Öhlinger</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="789 words"> <em>4 min</em> read</span></div></div></div><div class="post-content"><p>I have been playing with different GCP services recently, including GCP’s Vertex AI. During testing, I was trying to identify the usage of specific LLM model types within my environment through the GCP Logs Explorer which, unfortunately, did not return any results:</p><p><img data-src="/assets/img/GCP/20250130132705.png" alt="img-description" data-proofer-ignore> <em>GCP - Logs Explorer</em></p><p>As per Google’s <a href="https://cloud.google.com/vertex-ai/docs/general/audit-logging">documentation</a>, you need to enable data access logs to view the usage of any data read/write operations which includes usage of the models themselves.</p><p><img data-src="/assets/img/GCP/20250130134241.png" alt="img-description" data-proofer-ignore> <em>GCP - Audit Log Requirements</em></p><p>This is all expected behaviour but data access logs can be expensive. What if, even without those logs, you wanted to determine which AI models were being used within your environment? Or if you wanted to search for usage of specific models (e.g. deepseek cough* cough*)? Fortunately, Vertex AI has a model observability feature.</p><h2 id="vertex-ai-observability-metrics-and-monitoring"><span class="mr-2">Vertex AI Observability Metrics and Monitoring</span><a href="#vertex-ai-observability-metrics-and-monitoring" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><img data-src="/assets/img/GCP/20250130132845.png" alt="img-description" data-proofer-ignore> <em>GCP - Vertex AI Model Observability</em></p><p>Using the feature above, you can view the different model invocations throughout your environment for the specified project. If you navigate to “show all metrics”, you can even perform indepth analysis of the usage:</p><p><img data-src="/assets/img/GCP/20250130132812.png" alt="img-description" data-proofer-ignore> <em>GCP - Observability Monitoring</em></p><p>But, what if you wanted to view the usage across your entire organization instead of on a per-project basis?</p><ul><li>If you had access to billing, you could create a report to view the usage, but that may not be up-to-date based on your requirements as the cost table is generally a month behind.<li>If you had control over your environment, you may be able to increase your observability metrics <a href="https://cloud.google.com/blog/products/operations/multi-project-cloud-monitoring-made-easier">scopes</a>.<ul><li>Based on these modified scopes, you may also be able to create a multi-project dashboard within the Observability Monitoring service, however, that requires additional GCP permissions which you may not have:</ul></ul><p><img data-src="/assets/img/GCP/20250130133118.png" alt="img-description" data-proofer-ignore> <em>GCP - Observability Monitoring</em></p><h2 id="google-cloud-monitoring"><span class="mr-2">Google Cloud Monitoring</span><a href="#google-cloud-monitoring" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>In order to overcome these obstacles, I started looking into alternative methods to pull the metrics information using <a href="https://cloud.google.com/monitoring/custom-metrics/reading-metrics#monitoring_read_timeseries_fields-python">time-series fields</a> from the Python Google Cloud Monitoring Client Library. Following the examples in the documentation, I modified the filter string to specifically retrieve publisher model information from the <code class="language-plaintext highlighter-rouge">aiplatform.googleapis.com</code> API.</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">filter_str</span> <span class="o">=</span> <span class="s">'metric.type="aiplatform.googleapis.com/publisher/online_serving/model_invocation_count" resource.type="aiplatform.googleapis.com/PublisherModel"'</span>
</pre></table></code></div></div><p>The full function that I adapted is provided below, it includes a monitoring interval of 1 day but that can easily be extended for other use cases.</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
</pre><td class="rouge-code"><pre><span class="c1"># Function to fetch AI Platform metrics for a given project
</span><span class="k">def</span> <span class="nf">get_ai_platform_metrics</span><span class="p">(</span><span class="n">project_name</span><span class="p">):</span>
    <span class="n">project_name</span> <span class="o">=</span> <span class="n">project_name</span>
    <span class="c1"># Define the metric type and filter
</span>    <span class="n">filter_str</span> <span class="o">=</span> <span class="s">'metric.type="aiplatform.googleapis.com/publisher/online_serving/model_invocation_count" resource.type="aiplatform.googleapis.com/PublisherModel"'</span>

    <span class="c1"># Define aggregation settings
</span>    <span class="n">aggregation</span> <span class="o">=</span> <span class="n">monitoring_v3</span><span class="p">.</span><span class="n">Aggregation</span><span class="p">(</span>
        <span class="n">alignment_period</span><span class="o">=</span><span class="n">Duration</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="mi">60</span><span class="p">),</span>
        <span class="n">per_series_aligner</span><span class="o">=</span><span class="n">monitoring_v3</span><span class="p">.</span><span class="n">Aggregation</span><span class="p">.</span><span class="n">Aligner</span><span class="p">.</span><span class="n">ALIGN_RATE</span><span class="p">,</span>
        <span class="n">cross_series_reducer</span><span class="o">=</span><span class="n">monitoring_v3</span><span class="p">.</span><span class="n">Aggregation</span><span class="p">.</span><span class="n">Reducer</span><span class="p">.</span><span class="n">REDUCE_SUM</span><span class="p">,</span>
        <span class="n">group_by_fields</span><span class="o">=</span><span class="p">[</span><span class="s">"resource.labels.model_user_id"</span><span class="p">,</span> <span class="s">"resource.labels.location"</span><span class="p">]</span>
    <span class="p">)</span>

    <span class="n">now</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span>
    <span class="n">seconds</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">now</span><span class="p">)</span>
    <span class="n">nanos</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">now</span> <span class="o">-</span> <span class="n">seconds</span><span class="p">)</span> <span class="o">*</span> <span class="mi">10</span><span class="o">**</span><span class="mi">9</span><span class="p">)</span>
    <span class="n">interval</span> <span class="o">=</span> <span class="n">monitoring_v3</span><span class="p">.</span><span class="n">TimeInterval</span><span class="p">(</span>
        <span class="p">{</span>
            <span class="s">"end_time"</span><span class="p">:</span> <span class="p">{</span><span class="s">"seconds"</span><span class="p">:</span> <span class="n">seconds</span><span class="p">,</span> <span class="s">"nanos"</span><span class="p">:</span> <span class="n">nanos</span><span class="p">},</span>
            <span class="s">"start_time"</span><span class="p">:</span> <span class="p">{</span><span class="s">"seconds"</span><span class="p">:</span> <span class="p">(</span><span class="n">seconds</span> <span class="o">-</span> <span class="mi">86400</span><span class="p">),</span> <span class="s">"nanos"</span><span class="p">:</span> <span class="n">nanos</span><span class="p">},</span>
        <span class="p">}</span>
    <span class="p">)</span>

    <span class="n">results</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="n">list_time_series</span><span class="p">(</span>
        <span class="n">request</span><span class="o">=</span><span class="p">{</span>
            <span class="s">"name"</span><span class="p">:</span> <span class="n">project_name</span><span class="p">,</span>
            <span class="s">"filter"</span><span class="p">:</span> <span class="n">filter_str</span><span class="p">,</span>
            <span class="s">"interval"</span><span class="p">:</span> <span class="n">interval</span><span class="p">,</span>
            <span class="s">"view"</span><span class="p">:</span> <span class="n">monitoring_v3</span><span class="p">.</span><span class="n">ListTimeSeriesRequest</span><span class="p">.</span><span class="n">TimeSeriesView</span><span class="p">.</span><span class="n">HEADERS</span><span class="p">,</span>
            <span class="s">"aggregation"</span><span class="p">:</span> <span class="n">aggregation</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">results</span>
</pre></table></code></div></div><p>The full version of the python script can be found on <a href="https://github.com/KyhleOhlinger/gcp-scripts/blob/main/standalone_scripts/observability_metrics.py">GitHub</a>. The processing hasn’t been optimized and it’s not pretty, but it should work in a pinch if you’re looking for a quick method to perform an organization-wide search within your environment! The output is currently in a simple markdown table but that can be modified as per your requirements.</p><blockquote class="prompt-info"><div><p>The script uses Application Default Credentials (ADC) for authentication: <a href="https://cloud.google.com/docs/authentication/provide-credentials-adc#how-to/">https://cloud.google.com/docs/authentication/provide-credentials-adc#how-to/</a></p></div></blockquote><p>Once the script has run, the markdown table should look similar to the example output provided below:</p><div class="language-text highlighter-rouge"><div class="code-header"> <span data-label-text="Text"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre>No organization found, checking for projects...
Querying project: brilliant-fish-455131-f3
Querying project: tonal-tide-432421-f3
Querying project: maxim-product-44941-u7

| project_id | model_user_id |
|------------|---------------|
| brilliant-fish-455131-f3 | gemini-2.0-flash-exp |
| tonal-tide-432421-f3 | gemini-1.0-pro-vision-001 |
| maxim-product-44941-u7 | gemini-2.0-flash-exp |
</pre></table></code></div></div><p>Just a note, if you do try to implement multithreading for the time-series, there is a high likelihood that you will hit a quota limit!</p><div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
</pre><td class="rouge-code"><pre><span class="err">google.api_core.exceptions.ResourceExhausted:</span><span class="w"> </span><span class="mi">429</span><span class="w"> </span><span class="err">Quota</span><span class="w"> </span><span class="err">exceeded</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">quota</span><span class="w"> </span><span class="err">metric</span><span class="w"> </span><span class="err">'Time</span><span class="w"> </span><span class="err">series</span><span class="w"> </span><span class="err">queries'</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">limit</span><span class="w"> </span><span class="err">'Time</span><span class="w"> </span><span class="err">series</span><span class="w"> </span><span class="err">queries</span><span class="w"> </span><span class="err">per</span><span class="w"> </span><span class="err">minute'</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">service</span><span class="w"> </span><span class="err">'monitoring.googleapis.com'</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">consumer</span><span class="w"> </span><span class="err">'project_number:</span><span class="mi">855506332425</span><span class="err">'.</span><span class="w"> </span><span class="p">[</span><span class="err">reason:</span><span class="w"> </span><span class="s2">"RATE_LIMIT_EXCEEDED"</span><span class="w">
</span><span class="err">domain:</span><span class="w"> </span><span class="s2">"googleapis.com"</span><span class="w">
</span><span class="err">metadata</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="err">key:</span><span class="w"> </span><span class="s2">"service"</span><span class="w">
  </span><span class="err">value:</span><span class="w"> </span><span class="s2">"monitoring.googleapis.com"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span><span class="err">metadata</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="err">key:</span><span class="w"> </span><span class="s2">"quota_metric"</span><span class="w">
  </span><span class="err">value:</span><span class="w"> </span><span class="s2">"monitoring.googleapis.com/query_requests"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span><span class="err">metadata</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="err">key:</span><span class="w"> </span><span class="s2">"quota_location"</span><span class="w">
  </span><span class="err">value:</span><span class="w"> </span><span class="s2">"global"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span><span class="err">metadata</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="err">key:</span><span class="w"> </span><span class="s2">"quota_limit"</span><span class="w">
  </span><span class="err">value:</span><span class="w"> </span><span class="s2">"QueryRequestsPerMinutePerProject"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span><span class="err">metadata</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="err">key:</span><span class="w"> </span><span class="s2">"quota_limit_value"</span><span class="w">
  </span><span class="err">value:</span><span class="w"> </span><span class="s2">"6000"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span><span class="err">metadata</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="err">key:</span><span class="w"> </span><span class="s2">"consumer"</span><span class="w">
  </span><span class="err">value:</span><span class="w"> </span><span class="s2">"projects/PROJECT_ID"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span><span class="p">,</span><span class="w"> </span><span class="err">links</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="err">description:</span><span class="w"> </span><span class="s2">"Request a higher quota limit."</span><span class="w">
  </span><span class="err">url:</span><span class="w"> </span><span class="s2">"https://cloud.google.com/docs/quotas/help/request_increase"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></pre></table></code></div></div><p>I hope that you have learned something from this post and, as always, feel free to reach out to me with any comments!</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/technical/'>Technical</a>, <a href='/categories/google-cloud-platform/'>Google Cloud Platform</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Querying+Vertex+AI+Model+Usage+through+GCP+Observability+Metrics+-+Kyhle+%C3%96hlinger&url=https%3A%2F%2Fohlinger.co%2Fposts%2Fvertex-ai-metrics%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Querying+Vertex+AI+Model+Usage+through+GCP+Observability+Metrics+-+Kyhle+%C3%96hlinger&u=https%3A%2F%2Fohlinger.co%2Fposts%2Fvertex-ai-metrics%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fohlinger.co%2Fposts%2Fvertex-ai-metrics%2F&text=Querying+Vertex+AI+Model+Usage+through+GCP+Observability+Metrics+-+Kyhle+%C3%96hlinger" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/creating-a-chrome-extension/">Creating a Chrome Extension to Query Multiple LLMs</a><li><a href="/posts/centralizing-gcp-logging/">Setting up Logging and Billing for GCP Projects using Terraform</a><li><a href="/posts/testing-ai-setups/">High-Level Overview of my Current AI Toolset</a><li><a href="/posts/prompt-engineering-thoughts/">From Curiosity to Creativity&#58; My Thoughts on Prompt Engineering</a><li><a href="/posts/withsecure-myllmdoc-challenge/">WithSecure AI Challenge - My LLM Doctor</a></ul></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div class="post-navigation d-flex justify-content-between"> <a href="/posts/withsecure-myllmdoc-challenge/" class="btn btn-outline-primary" prompt="Older"><p>WithSecure AI Challenge - My LLM Doctor</p></a> <a href="/posts/creating-chatbots/" class="btn btn-outline-primary" prompt="Newer"><p>How to Build Your Own Chatbots with AI</p></a></div></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://twitter.com/KyhleO">Kyhle Öhlinger</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
